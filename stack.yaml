# For advanced use and comprehensive documentation of the format, please see:
# http://docs.haskellstack.org/en/stable/yaml_configuration/

resolver: lts-8.24

packages:
- '.'
- location:
    git: https://github.com/phadej/github.git
    commit: 5b6b4e8d7e44e165c3558a350c667b4c1c913c7b
  extra-dep: true
- location:
    git: https://github.com/jwiegley/gitlib.git
    commit: 60d053ca4035f0010c945a30ddd337af2e913a29
  subdirs:
    - gitlib-libgit2
  extra-dep: true
- location:
    git: https://github.com/thoughtbot/yesod-auth-oauth2.git
    commit: 25e63cdcc22935aed3dde79ef9f233ff783eeea3
  extra-dep: true
# - '/data/src/pi-base/graphql-api'
- location:
    git: https://github.com/jml/graphql-api.git
    commit: ba407bc8aaa182aa3e98ca0cdce509231e2318ca
  extra-dep: true

extra-deps:
- lens-aeson-1.0.1
- load-env-0.1.1
- rollbar-1.1.0

flags: {}

extra-package-dbs: []

extra-include-dirs:
- /usr/local/opt/icu4c/include
extra-lib-dirs:
- /usr/local/opt/icu4c/lib

docker:
  enable: false
  mount:
    - '/data/src/pi-base/server/env/dev:/app/env'
    - '/data/src/pi-base/data:/data'
    - '/data/src/pi-base/gitlib:/data/src/pi-base/gitlib'
    - '/data/src/pi-base/graphql-api:/data/src/pi-base/graphql-api'

image:
  container:
    base: 'pibase/base:latest'
    name: 'pibase/server'
    add:
      config: /app/config
      static: /app/static
    executables:
      - 'pi-base-server'
